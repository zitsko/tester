<!DOCTYPE html>
<html lang="el" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Ψηφιακά μαθησιακά αντικείμενα. Εκπαιδευτικός Όμιλος Πουκαμισάς"
    />
    <meta
      name="keywords"
      content="ψηφιακά, μαθησιακά, αντικείμενα, Όμιλος, Πουκαμισάς"
    />
    <meta name="author" content="Kostas Zotos, Zoi Papamichail" />

    <!-- ΨΜΑ TODO: Ανανέωση τίτλου -->
    <title>Διάκριση μεταξύ των στροφών και αντιστρόφων</title>

    <!-- Facebook -->
    <!-- meta property="og:title" content=""/>
		<meta property="og:image" content=""/>
		<meta property="og:url" content=""/>
		<meta property="og:site_name" content=""/>
		<meta property="og:description" content=""/ -->

    <!-- Favicon -->
    <!-- link rel="icon" type="image/png" sizes="48x48" href="./favicon_48x48.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon_32x32.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./apple-icon-114x114.png" -->

    <!-- Fonts -->
    <!-- link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet" -->

    <!-- Bootstrap -->
    <link rel="stylesheet" href="./lib/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./lib/css/bootstrap-icons.min.css" />
    <!-- link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" -->

    <!-- Drag and Drop for mobile -->
    <link rel="stylesheet" href="./lib/css/draganddrop.css" />

    <!-- Main style -->
    <link rel="stylesheet" href="./app/css/style.css" />

    <script src="./lib/js/jquery-3.7.0.min.js"></script>
    <script src="./lib/js/draganddrop.js"></script>
  </head>

  <body>
    <div id="outer_container" class="container-xl">
      <header id="header" class="row p-2">
        <div id="title" class="col-8 pt-2">
          <!-- ΨΜΑ TODO: Ανανέωση τίτλου -->
          <h1 class="fw-bold">Διάκριση μεταξύ των στροφών και αντιστρόφων.</h1>
        </div>

        <div id="controls" class="col-4 pt-2">
          <!-- Credits - Συντελεστές -->
          <a
            href="#"
            class="ms-2 float-end btn-move-down"
            role="button"
            aria-label="Συντελεστές - Credits"
            data-bs-toggle="modal"
            data-bs-target="#creditsModal"
          >
            <i
              class="bi bi-info-circle"
              id="info_icon"
              role="img"
              aria-label="Συντελεστές - Credits"
            ></i>
          </a>

          <!-- Προβολή Βοήθειας - Help Screen -->
          <a
            href="#"
            class="float-end btn-move-down"
            role="button"
            aria-label="Προβολή Βοήθειας - Help Screen"
            data-bs-toggle="modal"
            data-bs-target="#helpModal"
          >
            <i
              class="bi bi-question-circle"
              id="help_icon"
              role="img"
              aria-label="Προβολή Βοήθειας - Help Screen"
            ></i>
          </a>
        </div>
      </header>

      <main id="main" class="row">
        <div id="canvas_container" class="col w-100">
          <div id="inner_container" class="row">
            <div id="container_wrapper" class="col" tabindex="0" style="">
              <!-- NOTE: style here is for editting-->

              <!-- ΨΜΑ TODO: Ανανέωση κειμένου -->

              <p
                id="introParagraph"
                tabindex="0"
                title="Εισαγωγικό κείμενο"
                aria-label="Εισαγωγικό κείμενο"
              >
                Δίνονται αντεστραμμένα τα γράμματα της φράσης «ΑΓΑΠΩ ΤΑ
                ΜΑΘΗΜΑΤΙΚΑ». Καλείσαι να τα στρίψεις, ώστε να διαβαστεί η φράση.
              </p>
              <p id="message" class="text-center fw-bold fs-5" role="alert"></p>

              <button
                class="btn btn-outline-success mx-auto d-block"
                id="reloadBtn"
              >
                Έλεγχος και Επανάληψη
              </button>
              <div id="rotationAlert" class="visually-hidden" role="alert"></div>
              <div id="correctCountLiveRegion" aria-live="polite" class="visually-hidden"></div>

              <div class="letters-container mt-3">
                <div class="line1-first">
                  <div id="letterInfo_Α" class="visually-hidden">Information about Α</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α">Α</div>
          
                  <div id="letterInfo_Γ" class="visually-hidden">Information about Γ</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Γ">Γ</div>
          
                  <div id="letterInfo_Α2" class="visually-hidden">Information about Α</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α2">Α</div>
          
                  <div id="letterInfo_Π" class="visually-hidden">Information about Π</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Π">Π</div>
          
                  <div id="letterInfo_Ω" class="visually-hidden">Information about Ω</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Ω">Ω</div>
              </div>
                          
                <div class="line1-second">
                  <div id="letterInfo_Τ" class="visually-hidden">Information about Τ</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Τ">Τ</div>

                  <div id="letterInfo_Α3" class="visually-hidden">Information about Α</div>
                  <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α3">Α</div>
              </div>

              <div class="line2">
                <div id="letterInfo_Μ" class="visually-hidden">Information about Μ</div>
        <div class="letter" tabindex="0" aria-describedby="letterInfo_Μ">Μ</div>

            
                <div id="letterInfo_Α5" class="visually-hidden">Information about Α</div>
                <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α5">Α</div>
            
                <div id="letterInfo_Θ" class="visually-hidden">Information about Θ</div>
                <div class="letter visual-indicator" tabindex="0" aria-labelledby="letterInfo_Θ">Θ</div>
            
                <div id="letterInfo_Η" class="visually-hidden">Information about Η</div>
                <div class="letter visual-indicator" tabindex="0" aria-labelledby="letterInfo_Η">Η</div>
            
                <div id="letterInfo_Μ" class="visually-hidden">Information about Μ</div>
        <div class="letter" tabindex="0" aria-describedby="letterInfo_Μ">Μ</div>

            
                <div id="letterInfo_Α6" class="visually-hidden">Information about Α</div>
                <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α6">Α</div>
            
                <div id="letterInfo_Τ2" class="visually-hidden">Information about Τ</div>
                <div class="letter" tabindex="0" aria-labelledby="letterInfo_Τ2">Τ</div>
            
                <div id="letterInfo_Ι" class="visually-hidden">Information about Ι</div>
                <div class="letter visual-indicator" tabindex="0" aria-labelledby="letterInfo_Ι">Ι</div>
            
                <div id="letterInfo_Κ" class="visually-hidden">Information about Κ</div>
                <div class="letter" tabindex="0" aria-labelledby="letterInfo_Κ">Κ</div>
            
                <div id="letterInfo_Α7" class="visually-hidden">Information about Α</div>
                <div class="letter" tabindex="0" aria-labelledby="letterInfo_Α7">Α</div>
            </div>
            
                

              <!-- ΨΜΑ TODO: Ανανέωση κειμένου END -->
            </div>
          </div>
        </div>
      </main>

      <!-- ΨΜΑ Help Screen (popup) -->
      <div class="modal fade" id="helpModal" tabindex="-1" aria-hidden="true">
        <div
          class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"
        >
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="helpModalLabel">
                Οθόνη Βοήθειας
              </h1>
              <button
                type="button"
                class="btn-close btn-move-down"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <!-- ΨΜΑ TODO: Προσθήκη - αντικατάσταση κειμένου (ή HTML) με πληροφορίες, οδηγίες ή βοήθεια -->
              <p class="text-just">
                Δίνονται αντεστραμμένα τα γράμματα της φράσης «ΑΓΑΠΩ ΤΑ
                ΜΑΘΗΜΑΤΙΚΑ». Καλείσαι να τα στρίψεις, ώστε να διαβαστεί η φράση.
              </p>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary btn-sm px-3 py-2 btn-move-down"
                data-bs-dismiss="modal"
              >
                Κλείσιμο
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ΨΜΑ Credits (popup) -->
      <div
        class="modal fade"
        id="creditsModal"
        tabindex="-1"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"
        >
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="creditsModalLabel">
                Καρτέλα Συντελεστών
              </h1>
              <button
                type="button"
                class="btn-close btn-move-down"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body" id="creditsModalBody">
              <!-- Credits Here -->
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary btn-sm px-3 py-2 btn-move-down"
                data-bs-dismiss="modal"
              >
                Κλείσιμο
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- END OF: id="outer_container" -->

    <script>
      let credits = []; // DO NOT DELETE OR MODIFY THIS LINE

      credits = [
        [
          `Τίτλος ΨΜΑ`, // Τίτλος
        ],
        [
          `1.0`, // Έκδοση
        ],
        [
          `31.01.2024`, // Ημερομηνία Δημιουργίας
        ],
        [
          `<<όλη η συγγραφική ομάδα>>`, // Συντελεστές - Δημιουργία & Παιδαγωγική Σχεδίαση
          `Εκδόσεις Πουκαμισάς`, // Συντελεστές - Τεχνική Σχεδίαση & Ανάπτυξη
        ],
        [
          `logo.jpg`, // Λογότυπο Έργου & Λογότυπο Πλαισίου Χρηματοδότησης
        ],
      ];

      // END OF: credits
    </script>

    <!-- Add blocking scripts here at the end of body -->
    <!-- jQuery -->

    <script>

$(document).ready(function () {
    // Function to announce rotation for a given letter and rotation
    function announceRotation(letter, rotation) {
        const rotationMessage = "Γράμμα " + letter + " με περιστροφή " + rotation + " μοίρες";
        $("#rotationAlert").text(rotationMessage);
        $("#rotationAlert").attr("aria-live", "assertive");
    }

    // Function to handle the focus event on letters
    function handleLetterFocus() {
        const letter = $(this).text();
        const rotation = $(this).data("rotation"); 
               
            announceRotation(letter, rotation);       
    }

    // Initialize letters and announce their initial rotation
    $(".letter").each(function () {
        const initialRotation = Math.floor(Math.random() * 4) * 90; // 0, 90, 180, 270 degrees
        const letter = $(this).text();
        const letterId = "letterInfo_" + letter;
        $(this).css("transform", "rotate(" + initialRotation + "deg)");
        $(this).data("rotation", initialRotation);
        $(this).attr("aria-labelledby", letterId);

        // Attach focus event handler to each letter
        $(this).on("focus", handleLetterFocus);
    });

    // Function to check rotations and display the message
    function checkRotations() {
      $("#introParagraph").hide();
        let correctCount = 0; // Initialize a variable to count correct letters
        $(".letter").each(function () {
            const rotation = $(this).data("rotation");
            if (rotation === 0) {
                correctCount++;
            }
        });

        // Announce the number of correct letters to screen readers
        const correctCountMessage = "Σωστά γράμματα: " + correctCount;
        $("#correctCountLiveRegion").text(correctCountMessage);

        // Update the aria-live region to assertive
        $("#correctCountLiveRegion").attr("aria-live", "assertive");

        if (correctCount === $(".letter").length) {
            $("#message").html(
                "<img src='resources/smiley.jpg' alt='χαμογελαστή φατσούλα ' style='width: 30px; height: 30px;'> Μπράβο σωστή επιλογή, συνέχισε έτσι"
            );
        } else {
            $("#message").html(
                "Ουπς, δες τι δεν ταιριάζει και προσπάθησε ξανά,</br> πιο προσεκτικά αυτή τη φορά."
            );
        }
    }

    // Function to check if two arrays are equal
    function arraysEqual(arr1, arr2) {
        if (arr1.length !== arr2.length) return false;
        for (let i = 0; i < arr1.length; i++) {
            if (arr1[i] !== arr2[i]) return false;
        }
        return true;
    }

    // Click event handler for letters
    $(".letter").on("click", function () {
        let currentRotation = $(this).data("rotation");
        currentRotation = (currentRotation + 90) % 360; // Rotate by 90 degrees
        $(this).css("transform", "rotate(" + currentRotation + "deg)");
        $(this).data("rotation", currentRotation);

        const letter = $(this).text();
        announceRotation(letter, currentRotation);
    });

    // Keyboard event handling
    $(".letter").on("keydown", function (e) {
        if (e.key === " " || e.key === "Enter") {
            e.preventDefault();
            $(this).trigger("click");
        }
    });

    // Reload button click event handler
    $("#reloadBtn").click(function () {
        // Call the function to check the rotations and display the message
        checkRotations();
        // Delay the page reload
        setTimeout(function () {
            location.reload();
        }, 5000);
    });
});



    </script>

    <!-- Bootstrap -->
    <script src="./lib/js/bootstrap.bundle.min.js"></script>

    <!-- Main -->
    <!-- script src="./app/js/index.js"></script -->

    <script>
      // ----------- DO NOT DELETE THE FOLLOWING CODE --------------

      // -------------- Credits -------------
      $("#info_icon")
        .parent()
        .on("click", function () {
          let credits_data = credits;
          let credits_html = "";

          credits_title = $.trim(credits_data[0][0]);
          credits_version = $.trim(credits_data[1][0]);
          credits_date = $.trim(credits_data[2][0]);
          credits_role_1 = $.trim(credits_data[3][0]);
          credits_role_2 = $.trim(credits_data[3][1]);
          credits_role_3 = $.trim(credits_data[3][2]);
          credits_role_4 = $.trim(credits_data[3][3]);
          credits_logo = $.trim(credits_data[4][0]);

          credits_html += `<div>
            <p><b>Τίτλος:</b> ${credits_title}</p>
            <p><b>Έκδοση:</b> ${credits_version}</p>
            <p><b>Ημερομηνία Δημιουργίας:</b> ${credits_date}</p>
            <p><b>Συντελεστές</b></p>
            <ul style="list-style-type: none;">
              <li><p><b>Δημιουργία - Παιδαγωγική Σχεδίαση:</b> ${credits_role_1}</p></li>
              <li><p><b>Τεχνική Σχεδίαση - Ανάπτυξη:</b> ${credits_role_2}</p></li>
            </ul>
            <img src="app/images/${credits_logo}" alt="Λογότυπο Έργου και Πλαισίου Χρηματοδότησης" style="width: 100%"/>
          </div>`;

          $("#creditsModalBody").empty().html(credits_html);
        });

      // -------------- Dimensions and font size -------------

      let resolutionA = 16;
      let resoutionB = 9;
      let fontSize = 1;
      // let global_scale = 1;

      // $("#outer_container").css({ maxWidth: 1280 + "px" });

      $("#inner_container a").attr("target", "_blank");

      $(window).resize(function () {
        // Adjust canvas container dimensions (especially height) on window resize

        // Window Dimensions
        let windowWidth = $(window).width();
        let windowHeight = $(window).height() - $("#header").outerHeight(); // - 2;

        // Adjust width
        let maxWidth = 1280;
        let width = $("#main").width();

        if (width < maxWidth) {
          $("#outer_container").css({ width: "96%" });
          width = $("#main").width();
        }

        // Adjust resolution (landscape OR portrait)
        if (windowWidth > windowHeight) {
          resolutionA = 16;
          resolutionB = 9;
        } else if (windowWidth < windowHeight) {
          resolutionA = 9;
          resolutionB = 16;
        }

        // Adjust height
        let height =
          (width * resolutionB) / resolutionA - $("#header").outerHeight() + 60;

        let maxheight = Math.min(windowHeight, maxWidth);
        if (height > maxheight) {
          height = maxheight;
          width = (height * resolutionA) / resolutionB;
          $("#outer_container").css({ width: width + "px" });
        }

        // $("#canvas_container").css({ height: height + "px" });

        let tHeight = height - $("#inner_container").position().top + 20;
        $("#inner_container").css({ height: tHeight + "px" });

        let vHeight = height - $("#canvas_container").position().top + 30;
        $("#canvas_container").css({ height: vHeight + "px" });

        // $('#title').html(width + ', ' + height)

        // Adjust font size (dynamically set size based on screen size)
        fontSize = 0.018 * Math.min(windowWidth, windowHeight) + 6;
        $("*")
          .not("video, audio, track")
          .css({
            fontSize: fontSize + "px",
            lineHeight: fontSize * 1.3 + "px",
          });
        $("h1, h2").css({ fontSize: fontSize * 1.1 + "px" });
        $("h3, h4").css({ fontSize: fontSize + "px" });
        $("h5, h6, p, i, a, b, ol, ul, li").css({
          fontSize: fontSize * 0.9 + "px",
        });
        $(".bi").css({ fontSize: fontSize * 1.8 + "px" });

        /*
        // Adjust icons' size on window resize
        let global_scale = Math.max(width / maxWidth, 0.72);
        $(".icons").css({
          width: 38 * global_scale + "px",
          height: 38 * global_scale + "px",
        });
        */
      });

      $(window).resize();

      $(document).ready(function () {
        $(window).resize();
      });
    </script>
  </body>
</html>
